server {
        listen 80 default_server;
        listen [::]:80 default_server;

        root /var/www/html;

        index index.html index.htm;

        server_name _;

        location / {
            # Optional: Uncomment lines below to enable authentication
            # auth_basic "LLDPq Network Monitoring";
            # auth_basic_user_file /etc/nginx/.htpasswd;
            
            try_files $uri $uri/ =404;
            add_header Cache-Control "no-store, no-cache, must-revalidate, max-age=0";
            add_header Pragma "no-cache";
            add_header Expires "Thu, 01 Jan 1970 00:00:00 GMT";
        }
        location /configs/ {
            autoindex on;
            autoindex_exact_size off;
            autoindex_localtime on;
        }
        location /hstr/ {
            autoindex on;
            autoindex_exact_size off;
            autoindex_localtime on;
        }
        location /monitor-results/ {
            autoindex on;
            autoindex_exact_size off;
            autoindex_localtime on;
        }
        
        # Auto-trigger endpoint with fcgiwrap
        location = /trigger-lldp {
            # Execute trigger script via fcgiwrap
            fastcgi_pass unix:/var/run/fcgiwrap.socket;
            fastcgi_param SCRIPT_FILENAME /var/www/html/trigger-lldp.sh;
            fastcgi_param QUERY_STRING $query_string;
            fastcgi_param REQUEST_METHOD $request_method;
            fastcgi_param CONTENT_TYPE $content_type;
            fastcgi_param CONTENT_LENGTH $content_length;
        }
}

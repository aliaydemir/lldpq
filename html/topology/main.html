<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <link rel="shortcut icon" href="/png/favicon.ico">
        <link rel="stylesheet" href="next_sources/css/next.css">
        <link rel="stylesheet" href="styles_main_page.css">
        <script src="next_sources/js/next.js"></script>
        <script src="topology.js"></script>
        <script src="next_app.js"></script>
    </head>
    <body>
        <button id="runLLDPCheck" onclick="runLLDPCheck()">Run LLDP Check</button>
        <a href="main.html"><button>Refresh Autolayout</button></a>
        <button onclick='horizontal()'>Horizontal Layout</button>
        <button onclick="vertical()">Vertical Layout</button>
        
        <script>
        function runLLDPCheck() {
            const button = document.getElementById('runLLDPCheck');
            button.disabled = true;
            button.textContent = 'Running...';
            
            fetch('/trigger-lldp', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
            })
                .then(response => response.json())
                .then(data => {
                    console.log('✅ LLDP check response:', data);
                    button.textContent = '✓ Triggered! Refreshing in 5s...';
                    setTimeout(() => {
                        window.location.href = 'main.html';
                    }, 5000);
                })
                .catch(error => {
                    console.error('❌ LLDP check error:', error);
                    button.textContent = 'Error! Try again.';
                    button.disabled = false;
                });
        }
        </script>
    </body>
</html>
